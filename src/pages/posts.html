<!DOCTYPE HTML>

<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link link rel="stylesheet" href="style.css">
        <link rel="icon" href="assets/images/site-icon.png">
        <title>Hug the Grizzly</title>
    </head>
    
    <body>
        <div class="banner"></div>
        <header>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li class="nav-current"><a href="posts.html">Posts</a></li>
                    <li><a href="art.html">Portfolio</a></li>
                    <li><a href="about.html">About</a></li>
                </ul>
            </nav>
        </header>

        <div class="container">

            <!--Search posts-->
            <form class="search">
                <input type="text" id="search-bar" maxlength="40" />
            </form>

            <!--List of posts-->
            <article class="featured-post">
                <a class="thumbnail"><img src="assets/images/uc-thumbnail.png" /></a>
                <div class="post-info">
                    <div class="post-desc">
                        <h2>Upcoming Post</h2>
                        <p>A detective and two guardians set out on an adventure to find answers, protect those they care for, and change the world.</p>
                    </div>
                    <ul class="post-tags">
                        <li style="background-color: #d1d1d1">Story-Driven</li>
                        <li style="background-color: #d1d1d1">Choices Matter</li>
                    </ul>
                </div>
            </article>

            <article class="featured-post">
                <a href="posts/riders-republic.html" class="thumbnail"><img src="assets/images/2-thumbnail.png" /></a>
                <div class="post-info">
                    <div class="post-desc">
                        <h2><a href="posts/riders-republic.html">Smoke and Mirrors</a></h2>
                        <p>Amnesia: The Dark Descent is an iconic horror game that had a great influence on the genre. But what lurks in the shadows is not what it seems...</p>
                    </div>
                    <ul class="post-tags">
                        <li>Horror</li>
                        <li>Atmospheric</li>
                        <!--2010--> <!--frictional games--> <!--first person-->
                    </ul>
                </div>
            </article>

            <article class="featured-post">
                <a href="posts/riders-republic.html" class="thumbnail"><img src="assets/images//1-thumbnail.png" /></a>
                <div class="post-info">
                    <div class="post-desc">
                        <h2><a href="posts/riders-republic.html">Riders Republic is an Open-World Joyride</a></h2>
                        <p>Riders Republic is a fun, open-world sports game. It has racing, trickshotting, and open-world exploration with an upbeat, energetic tone.</p>
                    </div>
                    <ul class="post-tags">
                        <li>Racing</li>
                        <li>Open-World</li>
                        <!--2021--> <!--race--> <!--ubisoft-->
                    </ul>
                </div>
            </article>

            <div id="search-not-found"> <img src="assets/images/not-found.jpg" /></div>
        </div>

        <footer>
            <p>Hug the Grizzly</p>
            <a href="https://www.instagram.com/HugtheGrizzlyArt"><img src="assets/images/icons8-instagram.svg" width="38" height="38" /></a>
            <a href="https://www.twitter.com/HugGrizzlyDev"><img src="assets/images/icons8-twitter.svg" width="38" height="38" /></a>
        </footer>

        <!--Searchbar script-->
        <script>
            //creates HTMLcollection (array) out of elements under 'post-desc' class
            var posts = document.getElementsByClassName("featured-post");
            var arr = Array.from(posts);
            var errorImg = document.getElementById("search-not-found");
            //event listener to log every time user presses key
            var searchBar = document.getElementById("search-bar");
            searchBar.addEventListener('keyup', (e) => {
                var searchQuery = e.target.value;
                //restart at initial array index (-1)
                var number = -1;
                var isaPostShowing = false;

                //loop to check every array index
                while (number < posts.length) { //while number < number of posts
                    ++number; //number + 1
                    console.log(posts[number]);

                    //check if the HTML of any post contains search query
                    if (posts[number].innerHTML.toLowerCase().includes(searchQuery)) {
                        posts[number].style.display = "flex";
                        isaPostShowing = true;
                    }
                    else {
                        posts[number].style.display = "none";
                    }
                    //since 'number' changes inside this loop, it will be 'undefined' outside of it. so the if statement is inside loop

                    //if no posts match the search query after going through the loop, then show the 'not found' image
                    if (isaPostShowing == false) {
                        errorImg.style.display = "block";
                    }
                    else {
                        errorImg.style.display = "none";
                    }
                }

            });
        </script>
    </body>
</html>